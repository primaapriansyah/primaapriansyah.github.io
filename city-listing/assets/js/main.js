!function(){"use strict";$(function(){function b(){var a=!!("ontouchstart"in document.documentElement||navigator.userAgent.match(/Mobi/));return a}function c(){var b,a=d().height,c=0,g=82;$("header").length&&(g=$("header").height()),$("#login-form").length&&(b=$("#login-form").parent().parent().parent().parent(),c=b.height(),a-g-120>c?(b.css({display:"inline-block",top:"50%",marginTop:-(c/2)+g/2}),b.parent().css({height:a,marginTop:0,"overflow-y":"hidden"})):(82!=g?b.css({display:"inline-block",top:0,marginTop:"55px"}):b.css({display:"inline-block",top:0,marginTop:0}),b.parent().css({height:a-g,marginTop:g,"overflow-y":"auto"})),b.parent().parent().css({width:"100%",position:"relative",display:"table","text-align":"center"})),$("#password-form").length&&(b=$("#password-form").parent().parent().parent().parent(),c=b.height(),a-g-120>c?(b.css({display:"inline-block",top:"50%",marginTop:-(c/2)+g/2}),b.parent().css({height:a,marginTop:0,"overflow-y":"hidden"})):(82!=g?b.css({display:"inline-block",top:0,marginTop:"55px"}):b.css({display:"inline-block",top:0,marginTop:0}),b.parent().css({height:a-g,marginTop:g,"overflow-y":"auto"})),b.parent().parent().css({width:"100%",position:"relative",display:"table","text-align":"center"})),$("#review-form").length&&(b=$("#review-form").parent().parent().parent().parent(),c=b.height(),a-g-120>c?(b.css({display:"inline-block",top:"50%",marginTop:-(c/2)+g/2}),b.parent().css({height:a,marginTop:0,"overflow-y":"hidden"})):(b.css({display:"inline-block",top:0,marginTop:"55px"}),b.parent().css({height:a-g,marginTop:g,"overflow-y":"auto"})),b.parent().parent().css({width:"100%",position:"relative",display:"table","text-align":"center"})),$("#pm-form").length&&(b=$("#pm-form").parent().parent().parent().parent(),c=b.height(),a-g-120>c?(b.css({display:"inline-block",top:"50%",marginTop:-(c/2)+g/2}),b.parent().css({height:a,marginTop:0,"overflow-y":"hidden"})):(b.css({display:"inline-block",top:0,marginTop:"55px"}),b.parent().css({height:a-g,marginTop:g,"overflow-y":"auto"})),b.parent().parent().css({width:"100%",position:"relative",display:"table","text-align":"center"})),$(".search-popup").length&&(c=$(".search-popup .categories").height()+130,a-g-60>c?$(".search-popup").removeClass("search-short-height"):$(".search-popup").addClass("search-short-height")),setTimeout(function(){if($(".hero-header").length){var a=$(".hero-header"),b=$(".search-categories .categories").height();d().width<768?a.hasClass("search-popup")||(a.stop().css({height:""}),a.find(".hero-search").stop().animate({marginTop:"40px"},{duration:1e3})):!a.hasClass("search-popup")&&d().width>767&&d().height<b+320?(a.stop().animate({height:b+325},{duration:1e3}),a.find(".hero-search").stop().animate({marginTop:"40px"},{duration:1e3})):a.hasClass("search-popup")||(a.stop().css({height:""}),a.find(".hero-search").stop().animate({marginTop:"100px"},{duration:1e3}))}},500)}function d(){var a=window,b="inner";return"innerWidth"in window||(b="client",a=document.documentElement||document.body),{width:a[b+"Width"],height:a[b+"Height"]}}function e(){var a;d().width>=480?(a=d().width-$(".results-count").width()-245,$(".listing-results .bootstrap-select").css({"min-width":"auto","max-width":a})):(a=d().width-200,$(".listing-results .bootstrap-select").css({"min-width":a,"max-width":a,width:a}))}function f(){$("#slidemenu").css({"max-height":d().height})}function h(){d().width<600?$(".listing").hasClass("grid2")&&(g=1,$(".listing").removeClass("grid2")):g&&$(".listing").addClass("grid2")}function i(){b()?$(".body-wrapper").addClass("is-mobile"):$(".body-wrapper").removeClass("is-mobile")}function j(){b()?$('[data-toggle="tooltip"]').tooltip("disable"):$('[data-toggle="tooltip"]').tooltip("enable")}function l(){var a='.hero-search input[type="text"]';""===k&&(k=$(".typingEffect").prop("outerHTML")),""===$(a).val()&&d().width>480?($(a).attr("placeholder",""),$(a).removeClass("inFocus"),$(".typingEffect,.typed-cursor").remove(),$(".hero-search fieldset").append(k),$(".typingEffect").typed({strings:$(".typingEffect").attr("data-title").split("//"),typeSpeed:100,loop:!0})):$(a).attr("placeholder",$(a).attr("data-placeholder")),""!==$(a).val()&&($(".typingEffect,.typed-cursor").remove(),$(a).addClass("inFocus"))}function z(){return $(document).height()>$(window).height()}function A(a,b){if($(".mapList").length){if($(window).width()>767){var e,c=parseInt($(".mapList").css("right").replace(/[^-\d\.]/g,""),10),d=$(window).width();e=z()?270:285,"undefined"!=typeof a?1===a?b=d-e:"undefined"==typeof b&&(c<0&&(b=d),0===c&&(b=d-e)):(c<0&&(b=d),0===c&&(b=d-e)),$("#map").height($(window).height()-60).width(b),$(".mapList").css({display:"block"})}else $("#map").height($(window).height()-60).width($(window).width()),$(".mapList").css({display:"none"});$(".mapList").height("100%").width(285)}}function B(){$(".map-contact #map").height(350).width($(window).width())}function C(){$(".listing-map #map").height(450).width($(".listing-map #map").parent().width())}var g=0,k="";$('.hero-search input[type="text"]').on("click",function(){var a=$(this);""===a.val()&&($(".typingEffect,.typed-cursor").remove(),$(this).addClass("inFocus"))}),$("body").on("click",function(a){var b='.hero-search input[type="text"]';$(a.target).is(".hero-search input[type='text']")||""!==$(b).val()||$(b).hasClass("inFocus")&&($(b).removeClass("inFocus"),$(".typingEffect,.typed-cursor").remove(),$(".hero-search fieldset").append(k),l())});var m=".hero-header ",o=$(".hero-header");$("<div class='dumb'>").appendTo("body").addClass("color_skin").css("background-color");$(".dumb").remove(),$(".gallery").before('<div class="wave-top-gallery"></div>').dragScroll({}),$(".navbar-inverse .container").prepend('<div class="navbar-header"></div>'),$(".navbar-inverse .navbar-header").append('<a class="navbar-toggle"></a>'),$(".navbar-inverse .navbar-header .navbar-toggle").append('<span class="sr-only">Toggle</span>').append('<span class="icon-bar"></span>').append('<span class="icon-bar"></span>').append('<span class="icon-bar"></span>'),o.prepend('<div class="hero-image"></div>'),o.prepend('<div class="overlay"></div>'),o.prepend('<div class="dot-overlay"></div>'),$(m).not(".search-popup").find(".overlay").css({display:"block"}),$(".search-categories").append('<i class="more-categories fa fa-plus"></i>'),$(".search-categories").append('<i class="minus-categories fa fa-minus"></i>'),$(".listing-item-link").append('<div class="listing-black-overlay"></div>'),$(".search-categories .categories")[0].scrollHeight>80&&$(".search-categories .more-categories").css({display:"block"}),$("#slide-nav.navbar-inverse").after($('<div class="inverse" id="navbar-height-col"></div>')),$("#slide-nav.navbar-default").after($('<div id="navbar-height-col"></div>')),$(".search-popup,.review-popup,.pm-popup,.login-popup").prepend('<div class="back-site icon-arrow-left"></div>'),$(".listing-filter input[type='submit']").attr("value","ï…¸"),$(".accord-close").attr("href","#accordion"),$(".panel-form").animate({opacity:1},{duration:1e3});var q=".navbar-toggle",r="#page-content",s=".navbar-header",u="300px",v="-300px",w="-300px",x="#slidemenu, #page-content, body, .navbar, .navbar-header";$(".gallery .gallery-item a").each(function(){var a=$(this),b=a.attr("data-title");void 0!==b&&"undefined"!==b&&""!==b&&" "!==b&&a.after('<div class="gallery-item-caption">'+b+"</div>"),a.parent().find("img").length?""!==a.attr("href")&&" "!==a.attr("href")&&"#"!==a.attr("href")||a.attr("href",a.parent().find("img").attr("src")):a.after('<img alt="" src="'+a.attr("href")+'" />')}),$("header").length?$("header").append('<div class="full-dimming-overlay"></div>'):$("body").append('<div class="full-dimming-overlay"></div>'),$(".accordion-item a").each(function(){var a=$(this);a.after(a.prop("outerHTML").replace(/open/g,"close").replace("href",'class="accord-close" href'))}),setTimeout(function(){e(),j()},2e3),f(),c(),h(),l(),i(),$('.pg-user [data-toggle="tooltip"],.more-listing[data-toggle="tooltip"],.more-map-listing[data-toggle="tooltip"]').tooltip(),$('[data-toggle="tooltip"]').not("[data-original-title]").tooltip({container:"body"}),$(".gallery").mousewheel(function(a,b){this.scrollLeft-=30*b,a.preventDefault()}),$(window).on("resize",function(){d().width>767&&$(".navbar-toggle").is(":hidden")&&$(x).removeClass("slide-active"),f(),e(),j(),c(),h(),l(),i()}),$(".hero-header .search-submit").on({mouseenter:function(a){$(".hero-search-icon").addClass("hover")},mouseleave:function(a){$(".hero-search-icon").removeClass("hover")}}),$(".show-categories").on("click",function(){var a=$(this);setTimeout(function(){a.hasClass("opt-hidden")&&($(".show-categories, .search-categories").removeClass("opt-hidden"),$(".hero-search").css({display:"none"}))},5)}),$(".feat-posts .toggle").on("click",function(){$(".feat-posts").width()>30?($(".hero-search,.feat-posts").addClass("hide-feat"),$(".hero-search").siblings(".search-categories").addClass("hide-feat")):($(".hero-search,.feat-posts").removeClass("hide-feat"),$(".hero-search").siblings(".search-categories").removeClass("hide-feat"))}),$(".background-caption").on({mouseenter:function(a){var b=$(this).find(".bg-title");$(".hero-arrow").addClass("hover").stop().animate({left:$(this).width()/2+10,bottom:$(this).height()+5},{duration:300}),b.html(b.html()+" <span>+</span>")},mouseleave:function(a){var b=$(this).find(".bg-title");$(".hero-arrow").removeClass("hover").stop().animate({left:10,bottom:45},{duration:300}),b.html(b.html().replace(" <span>+</span>",""))}}),$(".logo a").on({mouseenter:function(a){$(this).stop().animate({opacity:.7})},mouseleave:function(a){$(this).stop().animate({opacity:1})}});var y=$(".search-categories .categories")[0].scrollHeight;$(".search-categories .more-categories").on({click:function(a){var c=($(".search-categories .categories"),$(".search-categories"));c.stop().animate({"max-height":800},{duration:1500}),$(this).css({display:"none"}),$(".search-categories .minus-categories").css({display:"block"}),$(".search-cities").addClass("show-cities")}}),$(".search-categories .minus-categories").on({click:function(a){var b=$(".search-categories .categories"),c=$(".search-categories");c.height()>120?(c.stop().animate({"max-height":[90,"easeOutExpo"]},{duration:600}),$(this).css({display:"none"}),$(".search-categories .more-categories").css({display:"block"})):(b.stop().animate({marginTop:parseInt(b.css("margin-top").replace(/[^-\d\.]/g,""),10)+76}),y+=76,$(".search-categories .more-categories").css({display:"block"}),b[0].scrollHeight-y<70&&$(this).css({display:"none"}))}}),$(".app-links a").on({mouseenter:function(){$(".app-img img").addClass("hover")},mouseleave:function(){$(".app-img img").removeClass("hover")}}),$("body").on("click",".full-dimming-overlay",function(){"0"===$("#slidemenu").css("left").replace(/[^-\d\.]/g,"")&&$(q).trigger("click")}),$("#slide-nav").on("click",q,function(a){var b=$(this).hasClass("slide-active");b?($("body").removeClass("stop-scrolling"),$(".full-dimming-overlay").stop().animate({opacity:0},{duration:1e3,complete:function(){$(".full-dimming-overlay").css({display:"none"})}})):($("body").addClass("stop-scrolling"),$(".full-dimming-overlay").css({display:"block"}).stop().animate({opacity:.88},{duration:1e3})),$("#slidemenu").stop().animate({left:b?v:"0px"}),$("#navbar-height-col").stop().animate({left:b?w:"0px"}),$(r).stop().animate({left:b?"0px":u}),$(s).stop().animate({left:b?"0px":"225px"}),$(this).toggleClass("slide-active",!b),$("#slidemenu").toggleClass("slide-active"),$("#page-content, .navbar, body, .navbar-header").toggleClass("slide-active")}),$(".listing-item-link").on({mouseenter:function(){var a=$(this);a.parent().parent().parent().hasClass("grid2")?(a.siblings("a, .listing-item-rating").not(".listing-item-author").stop().animate({top:"-10px",opacity:0}),a.siblings(".listing-item-author").stop().animate({top:"110px",opacity:0}),a.siblings(".listing-item-date").stop().animate({top:"-60px",opacity:0})):(a.siblings("a, .listing-item-rating").not(".listing-item-author").stop().animate({top:"-10px",opacity:0}),a.siblings(".listing-item-author").stop().animate({top:0,opacity:0}),a.siblings(".listing-item-date").stop().animate({top:"-60px",opacity:0}))},mouseleave:function(){var a=$(this);a.parent().parent().parent().hasClass("grid2")?(a.siblings(".listing-item-rating").stop().animate({top:"10px",opacity:1},{complete:function(){a.siblings(".listing-item-rating").css({top:""})}}),a.siblings(".category-icon").stop().animate({top:"25px",opacity:1},{complete:function(){a.siblings(".category-icon").css({top:""})}}),a.siblings(".listing-item-author").stop().animate({top:"84px",opacity:1},{complete:function(){a.siblings(".listing-item-author").css({top:""})}}),a.siblings(".listing-item-date").stop().animate({top:"-5px",opacity:1},{complete:function(){a.siblings(".listing-item-date").css({top:""})}})):(a.siblings("a, .listing-item-rating").not(".listing-item-author").stop().animate({top:"12%",opacity:1},{complete:function(){a.siblings("a, .listing-item-rating").not(".listing-item-author").css({top:""})}}),a.siblings(".listing-item-author").stop().animate({top:"-44px",opacity:1},{complete:function(){a.siblings(".listing-item-author").css({top:""})}}),a.siblings(".listing-item-date").stop().animate({top:"-5px",opacity:1},{complete:function(){a.siblings(".listing-item-date").css({top:""})}}))}}),$(".gallery-item a").on("mouseenter",function(){$(this).parent().addClass("dark-overlay"),$(this).parent().find(".gallery-item-caption").stop().animate({opacity:0},{duration:1e3})}),$(".gallery-item a").on("mouseleave",function(){$(".gallery-item a").parent().removeClass("dark-overlay"),$(this).parent().find(".gallery-item-caption").stop().animate({opacity:1},{duration:1e3})}),$("body").on("click",".header-search-button,.search-pop-button",function(a){a.preventDefault(),a.stopPropagation(),$(".search-popup").hasClass("showing-search")?($("body").removeClass("stop-scrolling"),$(".search-popup").removeClass("showing-search").stop().animate({left:"-200%",opacity:.99},{duration:500})):($("body").addClass("stop-scrolling"),$(".search-popup").addClass("showing-search").css({left:"-100%",zindex:999}).stop().animate({left:0,opacity:1},{duration:500}),$(".review-popup").removeClass("showing-review").stop().animate({left:"-200%",opacity:.99},{duration:500}),$(".pm-popup").removeClass("showing-pm").stop().animate({left:"-200%",opacity:.99},{duration:500}),$(".login-popup").removeClass("showing-login").css({zIndex:998}).stop().animate({left:"-200%",opacity:.99},{duration:500}))}),$("body").on("click",".search-popup .back-site",function(){$("body").removeClass("stop-scrolling"),$(".search-popup").removeClass("showing-search").stop().animate({left:"-200%",opacity:.99},{duration:500})}),$("#login-form-link").on("click",function(a){$("#login-form").delay(100).fadeIn(100),$("#register-form").fadeOut(100),$("#register-form-link").removeClass("active"),$(this).addClass("active"),a.preventDefault()}),$("#register-form-link").on("click",function(a){$("#register-form").delay(100).fadeIn(100),$("#login-form").fadeOut(100),$("#login-form-link").removeClass("active"),$(this).addClass("active"),a.preventDefault()}),$(".quick-menu a").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this),c=$(".quick-menu a"),d=$(".quick-menu a.show-menu");$(".quick-menu a.hidde-menu");b.hasClass("hide-menu")?(c.addClass("hidden"),d.removeClass("hidden"),c.parent().addClass("hidden-menu")):b.hasClass("show-menu")&&(c.removeClass("hidden"),d.addClass("hidden"),c.parent().removeClass("hidden-menu")),b.hasClass("gal")&&$("html, body").stop().animate({scrollTop:$("#gal").offset().top-112},600),b.hasClass("desc")&&$("html, body").stop().animate({scrollTop:$("#desc").offset().top-124},600),b.hasClass("rev")&&$("html, body").stop().animate({scrollTop:$("#rev").offset().top-124},600),b.hasClass("mp")&&$("html, body").stop().animate({scrollTop:$("#mp").offset().top-124},600),b.hasClass("rel")&&$("html, body").stop().animate({scrollTop:$("#rel").offset().top-124},600),b.hasClass("pvt")&&(setTimeout(function(){$(".pvt").trigger("mouseleave")},2e3),$("body").addClass("stop-scrolling"),$(".pm-popup").addClass("showing-pm").css({left:"-100%"}).stop().animate({left:0,opacity:1},{duration:500})),$('[data-toggle="tooltip"]').tooltip("hide")}),$("body").on("click",".write-review a",function(a){a.preventDefault(),a.stopPropagation(),$("body").addClass("stop-scrolling"),$(".review-popup").addClass("showing-review").css({left:"-100%"}).stop().animate({left:0,opacity:1},{duration:500})}),$("body").on("click",".review-popup .back-site",function(){$("body").removeClass("stop-scrolling"),$(".review-popup").removeClass("showing-review").stop().animate({left:"-200%",opacity:.99},{duration:500})}),$("body").on("click",".user-login,.sign-in",function(a){a.preventDefault(),a.stopPropagation(),$(".login-popup").hasClass("showing-login")?($("body").removeClass("stop-scrolling"),$(".login-popup").removeClass("showing-login").stop().animate({left:"-200%",opacity:.99},{duration:500})):($("body").addClass("stop-scrolling"),$(".login-popup").addClass("showing-login").css({left:"-100%",zIndex:999}).stop().animate({left:0,opacity:1},{duration:500}),$(".review-popup").removeClass("showing-review").stop().animate({left:"-200%",opacity:.99},{duration:500}),$(".pm-popup").removeClass("showing-pm").stop().animate({left:"-200%",opacity:.99},{duration:500}),$(".search-popup").removeClass("showing-search").css({zIndex:998}).stop().animate({left:"-200%",opacity:.99},{duration:500}))}),$("body").on("click",".login-popup .back-site",function(){$("body").removeClass("stop-scrolling"),$(".login-popup").removeClass("showing-login").stop().animate({left:"-200%",opacity:.99},{duration:500})}),$("body").on("click",".pm-popup .back-site",function(){$("body").removeClass("stop-scrolling"),$(".pm-popup").removeClass("showing-pm").stop().animate({left:"-200%",opacity:.99},{duration:500})}),A(1),B(),C(),$(".mapList").length&&($(".mapList").append('<div class="close-map-listing icon-cross2"></div>').append('<div class="feat-posts"></div>'),$(".mapList .feat-posts").append('<div class="helper"></div>'),$(".mapList .helper").append('<div class="feat-posts-list"></div>'),setTimeout(function(){$(".feat-posts-list").prepend($(".results-count").prop("outerHTML"))},500));var F,I,K,D="http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}",E='&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a>',G=50.5,H=30.51,J={},M={},N=[],O=0;if("undefined"!=typeof listingItems&&$("#map").length){var Q=new L.LatLng(G,H);F=L.tileLayer(D,{minZoom:3,maxZoom:18,attribution:E}),I=new L.Map("map",{center:Q,zoom:14,layers:[F]});for(var R=0;R<listingItems.length;R++){listingItems[R].id="_"+Math.random().toString(36).substr(2,9),M[listingItems[R].id]=listingItems[R];var U,S=M[listingItems[R].id],T=new L.LatLng(S.lat,S.lng);U="undefined"==typeof S.icon?"icon-map-marker":S.icon,K=L.divIcon({iconSize:new L.Point(50,50),html:'<i class="'+U+'"></i>'}),J[S.id]=new L.marker(T,{icon:K}).addTo(I),J[S.id]._icon.id=S.id,N[R]=[S.lat,S.lng],$(".mapList").length&&($(".mapList .feat-posts-list").append('<div class="feat-post temp-div"></div>'),$(".temp-div").addClass(S.id),"undefined"!=typeof S.link?$(".temp-div").append('<a href="'+S.link+'"></a>'):$(".temp-div").append('<a href="#"></a>'),b()&&$(".temp-div").append('<div class="map-icon icon-map2"></div>'),$(".temp-div a").append('<div class="feat-post-icon '+U+'"></div>'),"undefined"!=typeof S.featText&&$(".temp-div a").append('<div class="ribbon">'+S.featText+"</div>"),"undefined"!=typeof S.rating&&$(".temp-div a").append('<div class="listing-item-rating">'+S.rating+"</div>").append('<div class="feat-post-pic"></div>').append('<div class="feat-post-data"></div>'),"undefined"!=typeof S.img&&$(".temp-div .feat-post-pic").append("<div style=\"background-image:url('"+S.img+"')\"></div>"),$(".temp-div .feat-post-data").append('<div class="feat-post-title"></div>').append('<div class="feat-post-category"></div>'),"undefined"!=typeof S.title&&$(".temp-div .feat-post-title").append(S.title),"undefined"!=typeof S.category&&$(".temp-div .feat-post-category").append(S.category),$(".feat-post").removeClass("temp-div"))}$(".mapList").length&&($("#map").addClass("mapHidden"),$("#map").append('<div class="back-listing-button icon-arrow-left"></div>'),$(".mapList .feat-posts-list").append('<a href="#"class="more-map-listing icon-plus" title="More Listings" data-toggle="tooltip" data-placement="top"></a>'),A(0,"100%")),I.fitBounds(N),setTimeout(function(){I.invalidateSize()},1e3)}var V=0;$(".map-buttom .map-button-text").on({mouseenter:function(){$(".current-page-info,.header-search").addClass("hide-page-info"),$(".map-buttom").addClass("hover")},mouseleave:function(){V||$(".current-page-info,.header-search").removeClass("hide-page-info"),$(".map-buttom").removeClass("hover")},click:function(){V=1,$(".body-wrapper").css({height:"100%"}),$(".map-buttom").stop().animate({opacity:0}),$("#map").removeClass("mapHidden"),$(".map-buttom").removeClass("hover"),$(".mapList").stop().animate({right:0},{duration:800}),$(".map-listing").stop().animate({height:$(window).height()-60},{duration:1e3}),A(1),setTimeout(function(){I.invalidateSize(),I.fitBounds(N)},800),setTimeout(function(){$(".map-listing").removeClass("map-hidden"),$(".page-head").css({display:"none"})},1e3),$(".listing-block").stop().animate({opacity:0},{duration:500,complete:function(){$(".listing-block, footer").css({display:"none"})}})}}),$("body").on("click",".back-listing-button",function(){V=0,$(".body-wrapper").css({height:""}),setTimeout(function(){$(".current-page-info,.header-search").stop().removeClass("hide-page-info")},500),$(".page-head").css({display:"table"}),$(".page-head,.map-buttom").stop().animate({opacity:1}),$(".map-listing").stop().animate({height:250},{duration:1e3}),A(0,"100%"),setTimeout(function(){I.invalidateSize()},800),setTimeout(function(){$(".map-listing").addClass("map-hidden")},1e3),$("#map").addClass("mapHidden"),$(".mapList").stop().animate({right:-350},{duration:1500}),$(".listing-block, footer").css({display:"block"}),$(".listing-block").stop().animate({opacity:1},{duration:2e3}),$(".close-map-listing").addClass("icon-cross2").removeClass("icon-map-marker")}),$("body").on("click",".close-map-listing",function(a){"0px"===$(".mapList").css("right")?($(".close-map-listing").removeClass("icon-cross2").addClass("icon-map-marker"),A(0,"100%"),setTimeout(function(){I.invalidateSize()},1e3),$(".mapList").stop().animate({right:-290},{duration:1500})):($(".close-map-listing").addClass("icon-cross2").removeClass("icon-map-marker"),$(".mapList").stop().animate({right:0},{duration:1500}),setTimeout(function(){A(1)},1e3),setTimeout(function(){I.invalidateSize()},1500))}),$("body").on("click",".leaflet-div-icon",function(a){var e,b=this,c=$(this),d=c.attr("id");e="undefined"!=typeof M[d].link?'<div class="maplink '+d+'" data-link="'+M[d].link+'">':'<div class="maplink '+d+'" data-link="#">',O=1,setTimeout(function(){c.hasClass("selected")||c.hasClass("recentlyClosed")?(O=0,$(".leaflet-div-icon").removeClass("selected recentlyClosed"),$(".leaflet-popup").stop().animate({marginBottom:"0px"},{duration:300}),J[d].closePopup()):($(".leaflet-div-icon").removeClass("recentlyClosed"),$(".leaflet-div-icon").not(b).removeClass("selected"),$(".leaflet-div-icon").removeClass("highZ"),c.addClass("selected").addClass("highZ"),O=0,"undefined"!=typeof M[d].rating&&(e+='<div class="pop-rating">'+M[d].rating+"</div>"),"undefined"!=typeof M[d].img&&(e+='<div class="pop-img" style="background-image:url(\''+M[d].img+"')\">"),e+='<div class="pop-coor-icon"></div>',"undefined"!=typeof M[d].featText&&(e+='<div class="ribbon">'+M[d].featText+"</div>"),e+="</div>",e+='<div class="pop-coors">',"undefined"!=typeof M[d].lat&&(e+="<div><span>Lat</span> "+M[d].lat+"</div><br>"),"undefined"!=typeof M[d].lng&&(e+="<div><span>Lng</span> "+M[d].lng+"</div>"),e+="</div>","undefined"!=typeof M[d].title&&(e+='<div class="pop-title">'+M[d].title+"</div>"),"undefined"!=typeof M[d].category&&(e+='<div class="pop-category">'+M[d].category+"</div>"),"undefined"!=typeof M[d].address&&(e+='<div class="pop-address">'+M[d].address+"</div>"),e+="</div>",J[d].bindPopup(e),J[d].openPopup())},3)}),$("body").on("click","#map",function(a){($(a.target).hasClass("leaflet-pane")||$(a.target).hasClass("leaflet-container")&&0===W)&&($(".leaflet-div-icon").removeClass("selected recentlyClosed"),$(".leaflet-popup").stop().animate({marginBottom:"0px"},{duration:300}))}),$("body").on("mouseenter",".mapList .feat-post",function(a){var c,b=$(a.target).parent();b.hasClass("feat-post")?(c=b.attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click"),setTimeout(function(){$(".leaflet-div-icon").removeClass("selected"),$("#"+c).addClass("selected")},15)):b.parent().hasClass("feat-post")?(c=b.parent().attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click"),setTimeout(function(){$(".leaflet-div-icon").removeClass("selected"),$("#"+c).addClass("selected")},15)):b.parent().parent().hasClass("feat-post")&&(c=b.parent().parent().attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click"),setTimeout(function(){$(".leaflet-div-icon").removeClass("selected"),$("#"+c).addClass("selected")},15))}),$("body").on("click",".mapList .feat-post .map-icon",function(a){var c,b=$(a.target).parent().parent();b.hasClass("feat-post")?(c=b.attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click")):b.parent().hasClass("feat-post")?(c=b.parent().attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click")):b.parent().parent().hasClass("feat-post")&&(c=b.parent().parent().attr("class").replace("feat-post ",""),$("#"+c).hasClass("selected")||$("#"+c).trigger("click"))}),$("body").on("click",".pop-coor-icon",function(a){a.preventDefault(),a.stopPropagation(),"none"===$(this).parent().siblings(".pop-coors").css("display")?$(this).parent().siblings(".pop-coors").css({display:"block"}):$(this).parent().siblings(".pop-coors").css({display:"none"})}),$("body").on("click",".pop-coors",function(a){a.preventDefault(),a.stopPropagation()}),$("body").on("click",".maplink",function(a){$(".map-contact").length?(a.preventDefault(),a.stopPropagation()):window.location.href=$(this).attr("data-link")});var W=0;"undefined"!=typeof listingItems&&$("#map").length&&(I.on("movestart",function(a){W=1}),I.on("moveend",function(a){setTimeout(function(){W=0},10)}),I.on("popupopen",function(a){var b=I.project(a.popup._latlng);b.y-=a.popup._container.clientHeight/2,I.panTo(I.unproject(b),{animate:!0}),$(".leaflet-popup").css({marginBottom:"0px"}).stop().animate({marginBottom:"32px"},{duration:100})}),I.on("popupclose",function(a){O||($(".leaflet-div-icon").each(function(){$(this).hasClass("selected")&&$(this).removeClass("selected").addClass("recentlyClosed")}),$(".leaflet-popup").stop().animate({marginBottom:"0px"},{duration:300})),setTimeout(function(){$(".leaflet-div-icon").removeClass("recentlyClosed")},6)})),$(window).on("resize",function(){"undefined"!=typeof listingItems&&$("#map").length&&($(".map-listing.map-hidden").length||$(".map-listing").stop().animate({height:$(window).height()-60},{duration:300}),setTimeout(function(){A(),B(),C()},300),setTimeout(function(){I.fitBounds(N)},500),setTimeout(function(){I.invalidateSize()},1100))})})}();